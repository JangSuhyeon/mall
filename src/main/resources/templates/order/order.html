<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/order/layout-order">
<div-- layout:fragment="content">
    <div class="main">
        <div class="main-container order-page">
            <h2>ORDER</h2>
            <div class="order-container">
                <div class="order-wrapper">
                    <div class="order-list">
                        <h2>주문상품</h2>
                        <table>
                            <thead>
                            <tr>
                                <th style="width:500px;">상품명</th>
                                <th style="width:145px;">금액</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="art : ${arts}">
                                <td class="name">
                                    <span class="thumb"><img th:src="@{/images/thumbnail/{fileName}(fileName=${art.getArtImage().getFilename()})}"></span>
                                    <p th:text="${art.getTitle()}">작품명입니다.작품명입니다.작품명입니다.작품명입니다.작품명입니다.작품명입니다.</p>
                                </td>
                                <td class="price" th:text="${art.getPrice()}">45,000원</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="delivery-info">
                        <h2>배송정보</h2>
                        <table>
                            <tr>
                                <td class="title"><span class="red">*</span>이름</td>
                                <td class="text"><input type="text"></td>
                            </tr>
                            <tr>
                                <td class="title"><span class="red">*</span>주소</td>
                                <td class="text"><input type="text"><input type="button" value="우편번호 찾기"></td>
                            </tr>
                            <tr>
                                <td class="title"><span class="red">*</span>전화번호</td>
                                <td class="text"><input type="text"></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="buy-container">
                    <div class="buy-wrapper">
                        <h2>총 1개의 상품금액</h2>
                        <ul>
                            <li>합계</li>
                            <li><span th:id="total-order-price">1</span>원</li>
                        </ul>
                    </div>
                    <button class="buy-btn" th:id="buy-btn">구매하기</button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>
    <script>
        $('#buy-btn').click(function () {

            IMP.init('imp49336905');
            var money = $('#total-order-price').html();
            console.log(money);

            IMP.request_pay({
                pg : 'kcp',
                pay_method : 'card',
                merchant_uid : 'merchant_' + new Date().getTime(),
                name : 'mall' , //결제창에서 보여질 이름
                amount : money, //실제 결제되는 가격
                buyer_email : 'shjang0043@gmail.com',
                buyer_name : '구매자이름',
                buyer_tel : '',
                buyer_addr : '',
                buyer_postcode : ''
            }, function(rsp) {
                console.log(rsp);
                if ( rsp.success ) {
                    var msg = '결제가 완료되었습니다.';
                    msg += '고유ID : ' + rsp.imp_uid;
                    msg += '상점 거래ID : ' + rsp.merchant_uid;
                    msg += '결제 금액 : ' + rsp.paid_amount;
                    msg += '카드 승인번호 : ' + rsp.apply_num;
                } else {
                    var msg = '결제에 실패하였습니다.';
                    msg += '에러내용 : ' + rsp.error_msg;
                }
                alert(msg);
            });
        });
    </script>
</div-->
</html>